# Camelot优化实验总结

## 实验结果对比

### 1. Stream模式（原始方案）
- **开票日期**: 28/28 (100.0%) ✅
- **发票号码**: 28/28 (100.0%) ✅  
- **采购方**: 28/28 (100.0%) ✅
- **含税金额**: 9/28 (32.1%)
- **销售方**: 9/28 (32.1%)
- **项目信息**: 8/28 (28.6%)

### 2. Stream + strip_text参数
- **开票日期**: 28/28 (100.0%) ✅
- **发票号码**: 24/28 (85.7%) ⬇️ 
- **采购方**: 28/28 (100.0%) ✅
- **含税金额**: 9/28 (32.1%)
- **销售方**: 9/28 (32.1%)
- **项目信息**: 8/28 (28.6%)

问题：去除空格/换行符导致文本合并，影响字段识别

### 3. Lattice模式 + shift_text
- **开票日期**: 19/28 (67.9%) ⬇️
- **发票号码**: 19/28 (67.9%) ⬇️
- **采购方**: 28/28 (100.0%) ✅
- **含税金额**: 9/28 (32.1%)
- **销售方**: 9/28 (32.1%)
- **项目信息**: 9/28 (32.1%) ⬆️

问题：基础字段提取率大幅下降

## 结论

**保持原始的Stream模式效果最佳**，原因：

1. **基础字段完美提取**：发票号码、日期、采购方达到100%成功率
2. **稳定性高**：不会因参数调整导致意外的文本合并
3. **适合发票场景**：Stream模式基于文本流，更适合处理发票这种半结构化文档

## 最终建议

维持当前实现：
```python
# 优先使用stream模式，无需额外参数
tables = camelot.read_pdf(pdf_path, flavor='stream', pages='1')

# 仅在stream失败时使用lattice作为备选
if tables.n == 0:
    tables = camelot.read_pdf(pdf_path, flavor='lattice', pages='1')
```

对于需要改进的字段（销售方、金额、项目），建议通过优化提取算法而不是调整Camelot参数来解决。